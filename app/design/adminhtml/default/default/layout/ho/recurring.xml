<?xml version="1.0"?>
<!--
/**
 * Ho_Recurring
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the H&O Commercial License
 * that is bundled with this package in the file LICENSE_HO.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.h-o.nl/license
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to info@h-o.com so we can send you a copy immediately.
 *
 * @category    Ho
 * @package     Ho_Recurring
 * @copyright   Copyright © 2015 H&O (http://www.h-o.nl/)
 * @license     H&O Commercial License (http://www.h-o.nl/license)
 * @author      Maikel Koek – H&O <info@h-o.nl>
 */
-->
<layout>
    <default>
        <reference name="head">
            <action method="addCss"><stylesheet>ho/recurring/css/recurring.css</stylesheet></action>
        </reference>
    </default>

    <adminhtml_catalog_product_edit>
        <reference name="head">
            <action method="addItem"><type>skin_js</type><name>ho/recurring/js/jquery-1.11.3.min.js</name><params/></action>
            <action method="addItem"><type>skin_js</type><name>ho/recurring/js/jquery-ui.min.js</name><params/></action>
            <action method="addItem"><type>skin_js</type><name>ho/recurring/js/recurring.js</name><params/></action>
        </reference>
    </adminhtml_catalog_product_edit>

    <adminhtml_customer_edit>
        <reference name="customer_edit_tabs">
            <action method="addTab"><name>customer_edit_tab_recurring_profile</name><block>ho_recurring/adminhtml_customer_edit_tab_profiles</block></action>
        </reference>
    </adminhtml_customer_edit>

    <ho_recurring_adminhtml_profile_index>
        <reference name="content">
            <block type="ho_recurring/adminhtml_profile" name="adminhtml_ho_profile.grid.container" />
        </reference>
    </ho_recurring_adminhtml_profile_index>

    <ho_recurring_adminhtml_profile_view>
        <reference name="content">
            <block type="ho_recurring/adminhtml_profile_view" />
        </reference>
        <reference name="left">
            <block type="ho_recurring/adminhtml_profile_view_tabs" name="profile_view_tabs">
                <block name="profile_info_block"
                       type="ho_recurring/adminhtml_profile_view_tabs_info"
                       template="ho/recurring/profile/view/info.phtml">
                    <block type="ho_recurring/adminhtml_profile_view_tabs_info_products" name="profile_products"/>
                </block>
                <block name="profile_scheduled_order_block"
                       type="ho_recurring/adminhtml_profile_view_tabs_scheduled"
                       template="ho/recurring/profile/view/scheduled/items.phtml">
                    <block type="ho_recurring/adminhtml_profile_view_tabs_scheduled_totals"
                           name="order_totals" template="ho/recurring/quote/totals.phtml"  />
                </block>
                <action method="addTab"><name>profile_info</name><block>profile_info_block</block></action>
                <action method="addTab"><name>profile_scheduled_order</name><block>profile_scheduled_order_block</block></action>
                <action method="addTab"><name>profile_past_orders</name><block>ho_recurring/adminhtml_profile_view_tabs_pastOrders</block></action>
            </block>
        </reference>
    </ho_recurring_adminhtml_profile_view>

    <ho_recurring_adminhtml_profile_edit>
        <update handle="ho_recurring_adminhtml_profile_view"/>
        <reference name="profile_info_block">
            <block type="ho_recurring/adminhtml_profile_edit_info_billingAgreement"
                   name="profile_edit_billing_agreement"
                   template="ho/recurring/profile/edit/info/billing_agreement.phtml"/>
            <!--<block type="ho_recurring/adminhtml_profile_edit_shipping_address" name="profile_edit_shipping_address"/>-->
        </reference>
    </ho_recurring_adminhtml_profile_edit>

    <adminhtml_catalog_product_edit>
        <reference name="product_tabs">
            <action method="addTabAfter">
                <name>ho_recurring_profile_tab</name>
                <block>ho_recurring/adminhtml_catalog_product_tab_recurring</block>
                <after>categories</after>
            </action>
        </reference>
    </adminhtml_catalog_product_edit>

    <adminhtml_sales_order_view>
        <reference name="order_tab_info">
            <action method="unsetChild"><child>order_info</child></action>
            <block type="ho_recurring/adminhtml_sales_order_view_recurring"
                   name="ho_recurring_info"
                   template="ho/recurring/sales/order/view/recurring.phtml">
                <action method="insert"><name>order_info</name></action>
            </block>
            <action method="insert">
                <name>ho_recurring_info</name>
                <sibling>order_messages</sibling>
                <after>1</after>
                <alias>order_info</alias>
            </action>
        </reference>
    </adminhtml_sales_order_view>
</layout>
